<% layout('/layouts/boilerplate')%>

<link href="/css/index.css" rel="stylesheet" type="text/css" />
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick.min.css" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick-theme.min.css" />

<body>
    <main>
        <section id="welcome">
            <h1 class="animate__animated animate__fadeInDown">Welcome to MailMetrics <i class="fas fa-paper-plane"></i></h1>
            <p class="welcome-subtitle animate__animated animate__fadeInUp">
                Unlock the full potential of your email campaigns with smart A/B testing.
                <br> Elevate your open rates, click-throughs, and overall engagement like never before!
            </p>
        </section>

        <div class="container mt-5">
            <section id="quick-actions">
                <h2>Quick Actions</h2>
                <div class="row row-cols-1 row-cols-md-2 g-4">
                    <div class="col">
                        <a href="/MailMetrics/email" class="action-card-link">
                            <div class="card h-100">
                                <div class="card-body">
                                    <h3 class="card-title">
                                        <i class="fas fa-rocket"></i>
                                        <strong>Campaigns</strong>
                                    </h3>
                                    <p class="card-text">Launch and manage your email campaigns with diverse testing variants.</p>
                                </div>
                            </div>
                        </a>
                    </div>
                    <div class="col">
                        <a href="/MailMetrics/email" class="action-card-link">
                            <div class="card h-100">
                                <div class="card-body">
                                    <h3 class="card-title">
                                        <i class="fas fa-file-alt"></i>
                                        <strong>Templates</strong>
                                    </h3>
                                    <p class="card-text">Design and refine your responsive email templates with ease.</p>
                                </div>
                            </div>
                        </a>
                    </div>
                    <div class="col">
                        <a href="/MailMetrics/subscribers" class="action-card-link">
                            <div class="card h-100">
                                <div class="card-body">
                                    <h3 class="card-title">
                                        <i class="fas fa-users"></i>
                                        <strong>Subscribers</strong>
                                    </h3>
                                    <p class="card-text">Effortlessly view, organize, and grow your subscriber lists.</p>
                                </div>
                            </div>
                        </a>
                    </div>
                    <div class="col">
                        <a href="/MailMetrics/campaigns" class="action-card-link">
                            <div class="card h-100">
                                <div class="card-body">
                                    <h3 class="card-title">
                                        <i class="fas fa-chart-line"></i>
                                        <strong>Analyse</strong>
                                    </h3>
                                    <p class="card-text">Gain deep insights into your campaign performance with detailed analytics.</p>
                                </div>
                            </div>
                        </a>
                    </div>
                </div>
            </section>
        </div>

        <section id="recent-campaigns" class="my-5">
            <h2>Recent Campaigns</h2>
            <div class="slider" id="campaign-slider">
                <% if(allCampaigns.length === 0) { %>
                <div class="no-content-message">
                    <p>No recent campaigns to display. Start a new one today!</p>
                </div>
                <% } else { %>
                <% for(let i = allCampaigns.length - 1; i >= 0 && i >= allCampaigns.length - 10; i--) { %>
                <a href="/MailMetrics/campaigns/analyse/<%= allCampaigns[i]._id%>">
                    <div class="slider-item">
                        <span class="item-icon"><i class="fas fa-envelope-open-text"></i></span>
                        <h3 class="item-title"><%= allCampaigns[i].emailId.title %></h3>
                        <p class="item-subject"><%= allCampaigns[i].emailId.subject %></p>
                    </div>
                </a>
                <% } %>
                <% } %>
            </div>
        </section>

        <section id="recent-templates" class="my-5">
            <h2>Recent Templates</h2>
            <div class="slider" id="template-slider">
                <% if(allemail.length === 0) { %>
                <div class="no-content-message">
                    <p>No recent templates to display. Create a new template to get started!</p>
                </div>
                <% } else { %>
                <% for(let i = allemail.length - 1; i >= 0 && i >= allemail.length - 10; i--) { %>
                <a href="/MailMetrics/<%= allemail[i]._id%>">
                    <div class="slider-item">
                        <span class="item-icon"><i class="fas fa-file-code"></i></span>
                        <h3 class="item-title"><%= allemail[i].title %></h3>
                        <p class="item-subject"><%= allemail[i].subject %></p>
                    </div>
                </a>
                <% } %>
                <% } %>
            </div>
        </section>
    </main>

    <script>
        $(document).ready(function() {
            function initializeSlick(selector) {
                const slider = $(selector);
                const slideCount = slider.find('.slider-item').length;

                if (slideCount > 1) { // Only initialize if there's more than one item
                    slider.slick({
                        dots: true,
                        infinite: slideCount > 3,
                        speed: 500,
                        slidesToShow: 3,
                        slidesToScroll: 1,
                        arrows: true,
                        autoplay: true,
                        autoplaySpeed: 3000,
                        responsive: [{
                            breakpoint: 1024,
                            settings: { slidesToShow: 2, slidesToScroll: 1, infinite: slideCount > 2 }
                        }, {
                            breakpoint: 600,
                            settings: { slidesToShow: 1, slidesToScroll: 1, infinite: slideCount > 1 }
                        }]
                    });
                }
            }

            initializeSlick("#campaign-slider");
            initializeSlick("#template-slider");

            $(".slider").on("mouseenter", function() { $(this).slick("slickPause"); });
            $(".slider").on("mouseleave", function() { $(this).slick("slickPlay"); });
        });
    </script>
</body>
</html>